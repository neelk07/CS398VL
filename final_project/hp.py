from sets import Set
from bs4 import BeautifulSoup
import re, pprint
import urllib2
import json
import urllib2

SUMMARY_API = "http://clipped.me/algorithm/clippedapi.php?url="
SOURCE_URL = "http://www.harrypotterfacts.com/"
HP7_URL = "http://www.wikisummaries.org/Harry_Potter_and_the_Deathly_Hallows"
SMMZR_API = "http://api.smmry.com/&SM_API_KEY=B43C8FFBF7&SM_LENGTH=3&SM_URL="
books = ["Harry Potter and the Sorcerer's Stone", "Harry Potter and the Chamber of Secrets", "Harry Potter and the Prisoner of Azkaban", "Harry Potter and the Goblet of Fire","Harry Potter and the Order of the Phoenix", "Harry Potter and the Half-Blood Prince", "Harry Potter and the Deathly Hallows"]
num_chaps = [17,18,22,37,38,30,36]

summaries = {'Harry Potter and the Half-Blood Prince': [u'One of the portraits in the office announces the arrival of Fudge and he arrives by Floo Network.Rufus Scrimgeour, the new Minister of Magic arrives through the fireplaces.', u"Chapter 6-2 Spinner's End Bellatrix Lestrange is following Narcissa Malfoy trying to talk her out of going somewhere.Wormtail is also there being ordered by Voldemort to assist Snape, and is sent away to leave them alone.Bellatrix tells Snape she does not trust him and asks questions about his past actions.", u"On the floor a leaflet from the Ministry about protecting home and family, including a rumor that the Death Eaters may be using Inferi.Dumbledore sent a letter telling Harry he can go to The Burrow and arrives at their house.He tells Harry that Sirius's will was discovered and leaving Harry all his possessions, including Grimmauld Place.", u'Chapter 6-4 Horace Slughorn Dumbledore takes Harry on a side-along-Apparition and they set off to some destination.They arrive at some village of Budleigh Babberton where Dumbledore tells Harry they will be trying to persuade somebody to become a teacher again.It turns out that it is staged to look like some fight occurred, by the owner Horace Slughorn, who turns back into normal from having transfigured himself into a armchair.', u'She sees Harry is taller like Ron, as though they had Stretching Jinxes put on them.She tells Harry that Slughorn taught her and Arthur too.He tells them he has been working, busy with fake Metamorph-Medals and a Backfiring Jinx.', u"Chapter 6-6 Draco's Detour Harry stays at The Burrow.Bill got gold from his vault for Harry, because of tightened security he could do it faster.They get into an argument and Narcissa warns Ron and Hermione not to attack Draco.", u'Harry has a quick word with Mr Weasley telling him about when he saw Draco in Borgin and Burkes.On the Hogwarts Express Harry meets again with Neville and Luna.A fourth-year girl, Romilda Vane, invites Harry to join their carriage but Harry declines.', u'Chapter 6-8 Snape Victorious Harry lies paralyzed in the Hogwarts Express.She summons her Patronus to send word that she found Harry and she walks Harry to the Hogwarts gates.She tells Harry that she is stationed at Hogsmeade together with Proudfoot, Savage and Dawlish.', u"Snape tells people he did not ask them to take out their books and Hermione hastily puts back her copy of Confronting the Faceless.Next he questions them about non-verbal spells, Hermione recites from The Standard Book of Spells (grade 6), and then they start practicing them.Complaining about Ron's performance Snape suddenly turns his wand on Harry who shouts a \xa4 Protego.", u"Dumbledore tells Harry in his private lessons he will be given certain information about Voldemort's life and history and why he attempted to kill Harry.Harry may tell Ron and Hermione but they should keep everything to themselves.", u"Chapter 6-11 Hermione's Helping Hand Non-verbal spells are now expected in several classes.Hermione suggests they should visit Hagrid but Ron says they have Quidditch tryouts and he needs to practice the Aguamenti charm.Hermione mentions that people are afraid, the Patil twins' parents want them to go home and Eloise Midgeon has already been withdrawn.", u'The Prince seems to have been inventing spells himself, including \xa4 Muffliato, a spell that fills the ears of anyone nearby with a buzzing, and a spell \xa4 Levicorpus (N-vbl).Harry supposes N-vbl must mean non-verbal and doubts he will be able to perform it.Harry suddenly remembers his father used this spell, but Hermione reminds him they also saw Death Eaters use it at the Quidditch World Cup.', u'Chapter 6-13 The Secret Riddle Harry has another private meeting with Dumbledore.Dumbledore tells Harry that Katie was lucky she only brushed the necklace and that Snape managed to prevent rapid spread of the curse.Burke tells how Merope sold him her gold locket.', u'Hermione tells Harry there will be a private Slug Club Chrismas party, and no way he can wriggle out of that one.Harry is uncomfortably watching and breaks a bowl, he uses \xa4 Reparo to fix it, and Hermione dives flustered into her copy of Flesh-Eating Trees of the World.Dean turns out a good choice during practicing, only Ron is inconsistent due to nerves and lack of confidence.', u'Chapter 6-15 The Unbreakable Vow Ron and Hermione are not speaking to each other.Hermione tells Harry he needs to be careful since a lot of girls, including Romilda Vane are discussing how to slip Harry a Love Potion.Harry and Hermione hear someone behind the bookshelves.', u'Fred and George also came home for christmas, and Bill and Lupin are also coming.Mr Weasley tells Harry about the lack of success the Ministry has so far.Harry tells him too about Draco and Snape, and Lupin also listens in.', u'Hermione has a scroll from Dumbledore for Harry with the date of his next private meeting.Ron tells the others Harry already once did a Side-Along-Apparation.Harry goes to his private meeting with Dumbledore, the Pensieve already waiting on his desk.', u"Chapter 6-18 Birthday Surprises Hermione never heard about Horcruxes.Browsing more through the book, Harry sees a scribble saying 'just shove a Bezoar down their throats'.In a desperate attempt, his antidote is not progressing, Harry hurries down to the store cupboard and takes out a Bezoar.", u"Chapter 6-19 Elf Tails Harry, Hermione and Ginny are in the hospital wing with Ron.Harry, Hermione and Hagrid leave, Hagrid says it will be difficult for Dumbledore to keep the school open with two attacks already, he says it's no wonder Dumbledore is angry with Snape.In the common room Cormac is waiting for him, he saw Ron being taken to the hospital wing and he wants the Keeper position.", u"Chapter 6-20 Lord Voldemort's Request Harry and Ron may leave the hospital wing.Luna gives Harry a scroll from Dumbledore, his next private meeting is that evening.Ron does not seem much pleased anymore dating Lavender.", u'Kreacher and Dobby pop in in the common room.Draco turns out to be breaking no rules, but keen to visit the seventh floor with a variety of other students who keep watch.Harry, Ron and Hermione realize he has been visiting the Room of Requirement.', u"Harry suddenly thinks he might be able to get Slughorn's memory using the Felix Felicis potion.Some of the Montgomery sisters are not looking happy, their brother was attacked by a Werewolf and died, rumour goes it was Fenrir Greyback.At the end of the lesson, Slughorn is gone before Harry can ask about the memory.", u"Dumbledore considered Riddle's Diary which Harry handed four years ago to him certain proof that Voldemort had split his soul.Harry already destroyed the Diary, Dumbledore found and destroyed the gold ring of Marvolo Gaunt recently.He likely reserved creating the last Horcrux with the killing of Harry, so to destroy the danger the prophecy had outlined.", u"Chapter 6-24 Sectumsempra Harry tells Ron and Hermione about Slughorn and his memory.Harry has conflicting feelings about liking Ginny but her being Ron's sister.Katie has returned but she tells Harry she doesn't know who gave her the necklace.", u'Harry receives a scroll and Dumbledore wants to see him right away.On his way he hears a scream, he finds Professor Trelawney who, Harry spots, was trying to get into the Room of Requirement.Harry thinks she should tell Dumbledore and they both walk to his office.', u'Chapter 6-26 The Cave Harry and Dumbledore arrive near the cave.They climb down a cliff and enter the water, swimming to the cave.Harry offers some of his but Dumbledore does it himself, cutting his arm and they enter the opening.', u"Harry wants to take him immediately to Madam Pomfrey but Dumbledore says it is Snape he needs.Rosmerta appears and Harry asks if Dumbledore can stay with her while he goes to Hogwarts to get help.Rosmerta asks him if he hasn't seen it, and then points out the Dark Mark in the sky above Hogwarts, meaning there has been a killing.", u"Harry realizes he can move again, he casts a \xa4 Petrificus Totalus at the last Death Eater is leaving through the door and he goes rigid.Greyback is grabbing Harry but Harry immobilizes him with a \xa4 Petrificus Totalus.Ginny is in combat with Amycus, who is casting \xa4 Crucio's at her.", u"Chapter 6-29 The Phoenix Lament Hagrid says Harry should go inside, Ginny finally takes him back to into the castle.Nobody was killed, it was Bill who Harry had felt unconscious on the floor.They took Harry's Felix Felicis, otherwise they might all have been killed.", u"Chapter 6-30 The White Tomb All lessons are suspended and examinations postponed.She did find wizards with the initials, Rosalind Antigone Bungs and Rupert Axebanger Brookstanton but they don't fit at all.Now Harry hates the fact that Snape, the Prince, has helped him so much."], 'Harry Potter and the Prisoner of Azkaban': [u"On rare occasions when they did catch a real witch or wizard, the witch or wizard would perform a basic Flame-Freezing Charm and pretend to be in pain.The Dursleys locked up Harry's spellbooks, wand, cauldron and broomstick.Harry managed to 'steal' a spellbook back, since he needs it to write an essay about Shrinking Potions.", u'Harry hears a news report about an escaped convict, Sirius Black, who is armed and extremely dangerous.Once, when Harry had trodden on the paw of her dog, Ripper, and it had chased Harry into a tree, she had refused to call the dog off until past midnight.Harry takes her suitcase upstairs and goes back to the kitchen.', u'Chapter 3-3 The Knight Bus Harry wanders several streets after having fled from the house until reaching Magnolia Crescent.To not make the Ministery of Magic easy to track him, Harry pretends his name is Neville Longbottom.Harry is taken to Diagon Alley, in front of the Leaky Cauldron.', u"During breakfast each morning there he watches other witches and wizards arguing over articles in Transfiguration Today, Warlocks and Dwarfs.Harry has refilled his money bag with gold Galleons, silver Sickles and bronze Knuts from his vault at Gringotts and it requires a lot of self-control not to spend everything at once.He sees a set of Gobstones, a wizarding game, and a moving model of the galaxy in a glass ball, but doesn't buy them.", u"Chapter 3-5 The Dementor It is their last breakfast at the Leaky Cauldron.Before leaving, Mr. Weasley wants to tell Harry something, but Harry interrupts, telling him that he already knows about Black.Mr. Weasley wants Harry to promise he won't go looking for Black.", u'Harry, Hermione and Ron set out for their first Divination class at the top of North Tower.Sir Cadogan, a personage in one of the paintings on the wall, shows them the way.She starts telling them about the Inner Eye, the ability to penetrate the mysteries of the future.', u"Harry is then ordered to skin Draco's Shrivelfig.Seamus Finnigan tells Harry that Black has been spotted not far from Hogwarts, according to the Daily Prophet.Draco, overhearing their conversation, starts criticising Harry, saying that if he were in his place, he would go after Black himself.", u"Harry is not fond of Professor Trelawney's classes, Parvati Patil and Lavender Brown loved her classes more then anyone.In Hagrid's classes they now were only spending their lessons looking after Flobberworms.After returning from Quidditch practice one day, Harry hears that first Hogsmeade weekend will be at Halloween.", u"Chapter 3-9 Grim Defeat Dumbledore orders the whole castle to be searched, to see if Black is still around.Professor McGonagall has Harry's Quidditch training sessions supervised by Madam Hooch.Harry is late for Defense Against the Dark Arts classes.", u"Chapter 3-10 The Marauder's Map Harry has to stay in the hospital wing the rest of the weekend.After classes, Lupin wants a word with Harry.He feels sorry for Harry having lost his broomstick.", u'Chapter 3-11 The Firebolt Although in shock, somehow Harry had manages to get back through the tunnel to Hogwarts.Ron and Hermione warn Harry not to go after Black himself.Harry tells them about how he hears his mother die every time a Dementor is near.', u'Chapter 3-12 The Patronus Harry and Ron are angry at Hermione.Wood seeks Harry to find out if he will be able to play in the next game.Harry has his first Anti-Dementor lesson from Professor Lupin.', u"Chapter 3-13 Gryffindor versus Ravenclaw Ron and Hermione are enraged with each other.Harry has his final practice before the match against Ravenclaw.Harry suddenly sees a pair of eyes in the darkness and lights his wand with a \xa4 Lumos, to find out it's Crookshanks.", u"Chapter 3-14 Snape's Grudge The castle is searched again.Hagrid invites Ron and Harry to visit him in the evening.There is another Hogsmeade trip and Harry decides to go, taking his Invisibility cloak and the Marauder's Map.", u'Chapter 3-15 The Quidditch Final Hermione got the letter, stating Buckbeak will be executed, from Hagrid.Harry, Ron and Hermione have Charms class where they practice Cheering Charms.After classes, Harry and Ron go back to Gryffindor tower.', u"Chapter 3-16 Professor Trelawney's Prediction Exams are near.Her exam timetable shows various exams at the same time.Ron asks how she plans to do that but she does not answer the question; asking instead if either of them has seen her copy of Numerology and Grammatica.", u'Harry sees the reason; Crookshanks is approaching them.Suddenly a black Dog attacks them, jumping on Harry and rolling off og him.When attacking a second time, Ron pushes Harry aside and is caught by the dog and dragged away.', u'Lupin stops him, telling him they need to explain everything first since Harry, Ron and Hermione have the right to know everything.Black, Pettigrew and James Potter, his best friends, found out and became Animagi to keep him company during his time as a Werewolf.To save Snape from meeting with a fully grown Werewolf, James Potter pulled snape back at great risk to his own life.', u'At the same moment, Harry, Ron and Hermione disarm him with a \xa4 Expelliarmus, Snape is knocked out from the blow.Crookshanks has been helping Black to find and capture Scabbers.Pettigrew has in fact been hiding all these years, waiting to see if Voldemort would return.', u'Sirius asks Harry if, since he is his godfather, would he like to live with him?Harry is filled with happiness, gladly accepting the offer.When they are almost at the castle, Lupin, who had forgotten to take his potion, transforms into a Werewolf.', u'Snape starts telling Fudge that the three, especialy Harry, should be handled much more strictly.Snape had bound and gagged Black when he found them and took Harry, Ron and Hermione straight back to the castle.Madam Pomfrey, who is checking to see if they are alright, tells them that the Dementors will be performing the Kiss any moment now.', u'Chapter 3-22 Owl Post Again Harry and Hermione have ten minutes to get back to the hospital wing without beeing seen.Harry and Hermione wait till they have passed and then continue.Madam Pomfrey comes back to take care of them.'], 'Harry Potter and the Deathly Hallows': [], 'Harry Potter and the Goblet of Fire': [u"Their house is still called 'The Riddle House'.She had found all three Riddles dead; their eyes wide open and cold as ice.He insist he's innocent, and that the only peron he saw near the house on the day of the Riddles' deaths was a pale, dark-haired teenage boy.", u"Chapter 4-2 The scar Harry wakes up from his vivid dream, in pain from his burning scar.He tries to distract his mind with Flying with the Cannons but even that doesn't work.", u"The Dursleys received a letter from the Weasley family, asking if Harry can go to the Quidditch World Cup with them.Harry just has to casually mention the word 'godfather' and he is allowed to go.He goes up to his room, where Errol has just arrived with Pig, Ron's new owl.", u"Chapter 4-4 Back to The Burrow The next day, Harry packs his trunk and is set to go.Harry realises they have traveled here by using Floo Powder.Before Harry and Mr. Weasley can leave, they find out that Dudley found one of Fred's sweets and has eaten it.", u"Chapter 4-5 Weasley's Wizard Wheezes Harry arrives at the Weasley's house, the Burrow.Fred asks if Dudley ate the Ton-Tongue Toffee.He tells them he is working on a report to standardise cauldron thickness for the Department of International Magical Co-operation.", u'Chapter 4-6 The Portkey The next morning, everybody wakes up early to go to the World Cup.Bill, Charlie and Percy will go by Apparating.Mr. Weasley tells them a pair of people splinched themselves once, while trying to apparate, leaving half of themselves behind!', u'Basil warns them they had better get out of the way since there is a big party coming in from the Black Forest.Harry, Ron and Hermione get water at the other end of the field.Bagman tells them he takes bets from people.', u'Harry watches a review on his omnioculars in slow motion reading Krum doing the Wronski Feint.After a time out, the game starts again.The game is getting uglier and many fouls are comitted.', u'Chapter 4-9 The Dark Mark Everybody goes back to the tents.From a distance, Harry sees a crowd of masked wizards coming their way.Harry, Ron and Hermione have lost the others and they continue together into the woods.', u"Chapter 4-10 Mayhem at the Ministery After a few hours of sleep the whole group goes home.Harry tells Ron and Hermione that his scar hurt a short while ago and about Professor Trelawney's prediction.", u"Harry sees Amos Diggory's head talking to Mr. Weasley in the middle of flames in the fireplace.Mr. Weasley asks what Mad-Eye said had happened and Amos tells him that Mad-Eye caught some intruders at his house.Bill explains to Harry that Moody, Mad-Eye Moody, is an old friend of Dumbledore's.", u"Chapter 4-12 The Triwizard Tournament Arriving at the castle, they're 'welcomed' by Peeves with water bombs.The new students enter and the Sorting Ceremony starts.Nearly Headless Nick tells them Peeves made trouble earlier that evening, scaring all the House-elves.", u'Chapter 4-13 Mad-Eye Moody The first day of school begins.Harry and Ron have Herbology with Professor Sprout first.Hanna Abbott tells them that a girl named Eloise Midgen had once tried to curse off her acne.', u'Chapter 4-14 The Unforgivable Curses The next two days are calm.Harry has his first Defense Against the Dark Arts class from Professor Moody.First he shows them the Imperius Curse which exacts total control over a person or creature, using \xa4 Imperio on a spider.', u"Chapter 4-15 Beauxbatons and Durmstrang Worried about Sirius coming and the chance of him being caught, Harry writes him back to tell him that he is fine and that there is no need for him to come.After some of the other students seem helpless to the curse, it is Harry's turn.Moody puts an \xa4 Imperio on him but Harry partly manages to resist it.", u'Chapter 4-16 The Goblet of Fire There is a welcome dinner for the Durmstrang and Beauxbatons school delegations.At the end of dinner, Dumbledore stands up and announces the start of the Triwizard Tournament.Bagman and Crouch helped organize it and they will join himself, Karkaroff and Madame Maxime in the judging.', u'Bagman comes in and tells the three other champions Harry is the fourth champion.Madam Maxime and Karkaroff protest to the fact that Hogwarts has 2 champions now.Dumbledore asks if Harry put his name in the Goblet himself or if he asked somebody to do it.', u"Chapter 4-18 The Weighing of the Wands The day after the champions-selection, Ron is still angry.Hermione thinks it is obvious Harry didn't put his name in the Goblet himself.Hermione explains that Ron is simply jealous of Harry's fame; that he doesn't really believe Harry put his name in the Goblet himself.", u'Chapter 4-19 The Hungarian Horntail Harry is nervous about the first Task.Rita Skeeter wrote an article filled with lies about him in the Daily Prophet, and the Slytherins tease him with it.There is a Hogsmeade trip and Harry wears his Invisibility Cloak so that he will not be bothered.', u'They hypothesize about using Switching Spells and Transfiguring the dragon but can not think of easy ways.Harry also consults Basic Hexes for the Busy and Vexed.Harry is getting depressed and afraid at the prospect of the first task.', u"Harry tells Ron about Karkaroff having been a Death Eater.The next they go to the common room for Harry's surprise party.Hermione takes Harry and Ron to the castle kitchens.", u'After class she has a private word with Harry, telling him that he, as one of the Champions, will have to open the ball with their dance partners.Girls ask him to go with them but he says no. There is no article yet about Hagrid from Rita Skeeter.For the ball, Dumbledore has booked the Weird Sisters, a famous group which can be heard regularly on the Wizarding Wireless Network.', u'He congratulates Harry for getting past the Horntail.On christmas day, Harry wakes up to find Dobby in his room.Harry and Ron give Dobby clothes as a present.', u"Chapter 4-24 Rita Skeeter's Scoop Everybody gets up late the day after the Ball.Harry still hasn't managed to find out the clue of the golden egg.Malfoy tells them why Hagrid is not present, showing them an awfull article about him from Rita Skeeter in the Daily Prophet.", u"Chapter 4-25 The Egg and the Eye Harry decides to take the golden egg to the bath in the Prefects' bathroom.He gets out of the bath and leaves the bathroom.On the map he sees Bartemius Crouch's name in Snape's office.", u"They speculate about Snape possibly being involved in putting Harry's name in the Goblet.Harry also sends a letter to Sirius telling him what happened.The following days Harry, Ron and Hermione look for solutions to Harry's second task, which will require him to stay under water for an hour.", u'Snape accuses Harry of breaking into his office.Snape shows Harry Veritaserum, a Truth Potion, threatening to use it on him.Harry deliberately knocks over a bottle to overhear the conversation after class.', u"Harry asks Winky if she knows more about Mr. Crouch's whereabouts.Harry, Ron and Hermione send some food they got from the kitchen to Sirius.The Nifflers dig up Leprechaun gold that Hagrid has buried.", u'Nobody wants to explain what they are doing.Harry receives a letter from Sirius saying he should have been more careful going out alone with Krum.They also make a list of hexes in the library for Harry to practice, including the Impediment Jinx which slows down anything.', u'Chapter 4-30 The Pensieve Harry waits while Dumbledore accompanies Fudge and Moody downstairs.Harry sees Fawkes, the Sorting Hat and the sword of Godric Gryffindor.He also sees something shimmering from inside a black cabinet and checks it out.', u'They speculate intensely about everyone Harry had seen.Ron and Hermione help Harry prepare for the third task, practicing charms and hexes like the Impediment Jinx.Professor McGonagall gives Harry permision to practice in the Transfiguration classroom.', u'Chapter 4-32 Flesh, Blood and Bone Harry and Cedric come to a stop.Harry sees a green light, his Scar bursts again with pain and then the pain decreases.Wormtail ties Harry to a grave with the name Tom Riddle.', u"The Death Eaters Apparate from thin air and form a circle around Harry.Voldemort explains that Lily Potter, Harry's mother, died attempting to save Harry.Voldemort uses the Cruciatus Curse \xa4 Crucio again on Harry.", u"Chapter 4-34 Priori Incantatem Harry has his Wand back.Harry manages to resist and hides behind the grave of Voldemort's father.The fight is about to end; Harry has nowhere to go.", u"Chapter 4-35 Veritaserum Harry gets back to Hogwarts, bringing back Cedric's body.Amos Diggory is speeding to the scene to find out what happened.Harry is taken away by Moody to his office.", u"Chapter 4-36 The Parting of the Ways Barty Crouch is tied up.Fawkes, the Phoenix, flies over to heal Harry's leg.Harry has to explain in detail about his encounter with Voldemort.", u'Harry wants to give them the prize money but they do not accept it.Before going back home, there is a Leaving Feast.He announces that Cedric was murdered by Voldemort and that it was Harry who brought his body back at the risk of his own life.'], 'Harry Potter and the Chamber of Secrets': [u"On Harry's birthday, sitting alone in the park, he spots a pair of green eyes staring back from a hedge.Harry has to stay in his room while he aunt and uncle entertain their guests.", u"Dobby warns Harry not to go back to Hogwarts because if Harry does, he will be in mortal danger.Harry learns that Dobby has intercepted Ron and Hermione's letters to make Harry believe he had no friends at the school.When Harry refuses to promise not to return to Hogwarts, Dobby goes downstairs to the kitchen and levitates the dessert, a cream pudding that was to be served to Dursley's guests.", u"Chapter 2-3 The Burrow Ron wakes Harry up.He heard about Harry being locked up from his father who works for the Ministry of Magic.After taking all his stuff and Hedwig they break out the bars, almost being caught by Uncle Vernon, and fly back to Ron's house.", u'Ron and Harry receive a letter from Hermione.Ron tells her that Harry has never travelled by Floo Powder before.After explaining that you have to throw a bit of floo powder into the fireplace and clearly state the name of the place where you want to go while stepping into the fire, Harry steps into the fire.', u"The car has been magically enhanced to be bigger from the inside then it looks on the outside.After having to go back for George's Filibuster fireworks, Fred's broom and Ginny's diary, they finally start on their way.With the gateway sealed, Ron suggests to take Mr. Weasley's car.", u"Their first class that day is Herbology with Professor Sprout in the greenhouse outside the castle.They start repotting them, taking the pots and compost, carefully avoiding the Venemous Tentacula because it's teething.Harry, Ron and Hermione are joined by Justin Finch-Fletchley from Hufflepuff.", u"Chapter 2-7 Mudbloods an Murmurs Harry leaves for Quidditch practice.He keeps asking Harry all kind of questions about Quidditch, walking after Harry untill Harry finally manages to shake him off when he reaches the changing rooms.Going back to the castle, Harry and Ron are told they will do detention at eight o'clock in the evening.", u'Chapter 2-8 The Deathday Party October arrives and there is a spate of colds among the staff and students.Squelching along the deserted corridors one day Harry encounters Nearly Headless Nick, the ghost of Gryffindor Tower.At the end of his conversation with Nearly Headless Nick, Filch burst in the corridor and takes him to his office for dripping mud from his shoes all over the castle.', u"Chapter 2-9 The writing on the Wall Filch thinks Harry killed his cat.Dumbledore takes Harry, Ron, Hermione and Filch with him to Professor Lockhart's office.Filch is convinced Harry did it since Harry found out he's a Squib.", u'Chapter 2-10 The Rogue Bludger Since the pixies incident, Pofessor Lockhart brought no live creatures to classes.So far Harry played a Transylvanian villager whom Lockhart had cured of a Babbling Curse, a yeti and a vampire.In the current lesson Harry has to play a Werewolf, Lockhart showing how he managed to perform a complex Homorphus Charm.', u"Chapter 2-11 The Dueling Club Harry is healed and is excused from the Hospital wing.Harry looks for Hermione and Ron and finds them in Moaning Myrtle's bathroom.Harry tells them what happened to Colin, which they already overheard Professor McGonagall telling Professor Flitwick.", u"Chapter 2-12 The Polyjuice Potion Harry is left in Dumbledore's office.It reads Harry's thoughts about him wondering and says the dicision was hard, Harry would have done well in Slytherin.Harry sees that he's not alone, there's a bird on a golden perch which suddenly bursts into flames.", u'Chapter 2-13 The Very Secret Diary Hermione had to stay in the hospital wing for several weeks.It turns out to be the diary of T.M.Riddle.Harry tells her about the diary they found that had belonged to T.M.', u'Chapter 2-14 Cornelius Fudge Hagrid has always been fond off monsters as pets, but they are not one hundred percent sure it was him.As long as there are no more attacks they decide not to confront him.Harry ends up choosing the same subjects as Ron.', u'Harry spots spiders during classes, all headed toward the Forbidden Forest.At night Ron and Harry sneak out of the school again using the Invisibility Cloak.Harry tells him that Hagrid is sent to Azkaban and that he is suspected of opening the Chamber of Secrets and setting a monster free.', u'Chapter 2-16 The Chamber of Secrets Exams are still on, even with the attacks going on.Professor McGonagall announces in the Great Hall that the Mandrakes are ready for cutting and that the people who have been Petrified will be revived at night.Ginny Weasley joins them at the table, looking nervous and wanting to tell Ron and Harry something but she decides not to when Percy joins the table.', u'The diary is lying on the floor near a giant statue.She finally became suspicous and tried to get rid of the diary, which Harry later found.For months his new target has been Harry.', u"Harry explains everything what had happened, avoiding mentioning Riddle's diary or Ginny.Ron and Harry will both receive a Special Award for Services to the School.Although he can not prove it, Harry acuses him of putting the Diary into Ginny's bag in Flourish and Blotts."], 'Harry Potter and the Order of the Phoenix': [u"Chapter 5-1 Dudley Demented Harry is back at the Dursleys' at Privet Drive, lying hidden below a window in the garden so he can hear the tv news.Harry knows that Dudley and his gang have been around vandalising the neighbourhood instead.Sudenly there's a loud crack, a cat streaks out from under a parked car, a shriek, a bellowed oath and the sound of breaking china, and Harry draws his wand.", u"It was Mundungus Fletcher who disapparated from the front of Harry's house.He should have been watching Harry when he left to buy stolen cauldrons.At that moment an owl flies in bringing Harry a letter from the Ministry of Magic.", u"Four days later, Uncle Vernon tells Harry they're going out.Someone uses a \xa4 Lumos to make some light.Harry meets everybody and is told they're taking him to Headquarters.", u"She tells the group which brought Harry that 'He's just arrived, the meeting's started'.Harry is not allowed to join the meeting which is only for members of the Order.Mrs. Weasley joins the meeting after showing Harry to a door with a knob in the shape of a serpent.", u'Harry thinks the parchment showed some building plan.Sirius wants to tell Harry about the Order of the Phoenix.Dumbledore thinks Voldemort wants to build up an army of Death Eaters and a great variety of Dark creatures.', u"Harry, Ron, Fred and George discuss what they have heard.They wonder what the 'weapon' is and who's got it.George says it's not necessarily big, as 'size is no guarantee of power'; like Ginny, who is smaller, and she has a mean Bat-Bogy Hex.", u"Chapter 5-7 The Ministry of Magic Harry wakes up early, ready to go to the hearing.Mr. Weasley tells Harry the hearing will be on his floor, in Amelia Bones' office.Harry sees a fountain with a group of golden statues of a wizard, a witch, a Centaur, a Goblin and a House-elf.", u"Chapter 5-8 The Hearing Harry enters Courtroom Ten.When Harry replies he didn't know the time had changed, he gets answered that that is not the Wizengamot's fault and he's told to sit down in a chair in the front.Dumbledore charms a chair and sits next to Harry.", u"Chapter 5-9 The Woes of Mrs. Weasley Harry's hearing is over.Harry hurries to leave too and meets outside with Mr. Weasley.They think he may have liked it if Harry had been expelled and could have lived with him.", u'Moody prefers to wait till Podmore gets back, otherwise the guard will be one short to take Harry.Sirius goes as Snuffles and together with Moody and Tonks, but without Podmore, they take Harry to Platform nine and three-quarters.Harry says goodby and they get on the train.', u'They see a new teacher at the staff table.Harry recognizes her as Umbridge, who works for Fudge, from his trial.After dinner Dumbledore announces that Umbridge will be the new Defense Against the Dark Arts teacher.', u"Chapter 5-12 Professor Umbridge Fred and George advertise for people to test their products.Hermione says Lavender also does not believe Harry and Dumbledore.At breakfast Angelina tells Harry she's been made Quidditch Captain.", u'Chapter 5-13 Detention with Dolores Harry, Ron and Hermione return to the common room.Harry asks Grubbly-Plank about Hagrid, but she does not give an answer.On their way to the greenhouses Luna tells him she believed Voldemort is back and that Harry fought and escaped from him.', u'Chapter 5-14 Percy and Padfoot Harry wakes up and writes a letter to Sirius.In the owlery he sends Hedwig away with the letter.Next Filch storms in, accusing Harry to have ordered Dungbombs.', u"Harry gets another week detention and Angelina is furious because he'll miss Quidditch practices again.She also suggests Harry should be the teacher.", u'There are not many people inside the bar, only a man at the bar with his head wrapped in dirty bandages, two figures in hoods at a table, and a witch with a black veil beside the fireplace.Harry, Ron and Hermione sit at a table when the other students which Hermione invited arrive.Harry talks with the others when asked about Cedric.', u"Hermione says that's not possible, as she has put a jinx on the parchment they signed.Angelina tells Harry and Ron that they will also need permission for the Quidditch team.Harry lets her in and finds out she's hurt.", u"She thinks Umbridge simply was looking for an excuse to get Harry's mail.Ron, trying the \xa4 Silencio can't make it work, and both he and Harry get extra homework.Angelina comes over to tell Harry she got permission for the Quidditch team.", u"Chapter 5-19 The Lion and the Serpent The DA meetings are showing progress.All of them have a Protean Charm to mimic Harry's coin so Harry can set the time.Terry boot asks why she's not in Ravenclaw because of her intelligence, but Hermione says the Sorting Hat considered that but it decided on Gryffindor in the end.", u'Dumbledore told them where to look, but they had to take a detour to shake off someone from the Ministry tailing them.Dumbledore told them to bring the Gurg, the Giant chief named Karkus, a gift every day.The first gift they brought him was a branch of Gubraithian Fire and told him it is a gift from Albus Dumbledore with respectful greetings.', u"He still does not want to tell what he's keeping in the Forbidden Forest, it's a surprise.Harry sees great black winged horses emerging from the darkness.Christmas is coming and Harry is invited to spend it at the Weasleys.", u"Dubledore does not look at Harry but asks how he saw it.Harry says he saw from the Snake's perspective, through its eyes.Dumbledore calls two of the Headmasters in the pictures on the walls, Dilys and Everard, he tells Everard to raise the alarm and both move out of their pictures.", u'Chapter 5-23 Christmas on the Closed Ward Harry is back at Grimmauld Place.Phineas Nigellus appears in his frame and talks to Harry, who wants to run away.Hermione has come back from skiing holiday and talks to Harry.', u'Chapter 5-24 Occlumency Kreacher turns up again, he seems to have been lurking in the attic and looks in a better mood then before.At Grimmauld Place Harry is called to talk to Professor Snape in the kitchen.Harry is told that Dumbledore want him to learn Occlumency, an obscure branch of magical defense against external penetration.', u"Chapter 5-25 The Beetle at Bay They find out why Voldemort was so happy.The next morning Daily Prophet has an article about ten Death Eaters who escaped from Azkaban.The newspaper also contains an article about Broderick Bode who was found dead in his bed at St Mungo's, strangled by a pot plant.", u"Hermione explains Harry what 'went wrong' with their date and how he should have had more tact.Ron and Ginny tell that Quidditch practices are not going well.At the Quidditch match they lose by ten points when Ginny finally catches the snitch under Hufflepuff Seeker Summerby's nose.", u'Firenze greets Harry and says it was foretold they meet again, all other students are in awe.After class Firenze asks Harry to tell Hagrid that his attempt is not working and he would do better to abandon it.Harry is tackled by a Trip Jinx by Draco.', u"Chapter 5-28 Snape's Worst Memory The next day there's an announcement stating Umbridge has replaced Dumbledore.Draco tells them he's member of the Inquisitorial Squad and takes points of Gryffindor House.Filch tells Harry that Umbridge wants to see him.", u"Chapter 5-29 Careers Advice Harry feels bad about the way he saw his father.In the library Harry tells Ginny he'd like to talk to Sirius.Harry, Ron and Hermione look at posibilities in some flyers.", u"Chapter 5-30 Grawp Fred and George's leaving becomes something of a legend.Ron and Hermione wonder how Fred and George managed to buy a premises and Harry explains he gave them his Triwizard winnings.Hermione urges Harry to take Occlumency lessons again.", u'Harry hears Draco bragging that his father is close to the Wizarding Examinations Authority.Hermione accidentally hits Harry in the nose with Achievements in Charming.After Charms theory exam, students are called in alphabetically for practical exam.', u"Harry tells them Voldemort's got Sirius inside the Ministry.Hermione thinks it's rather fishy and wonders if Voldemort is trying to get Harry inside the Department of Mysteries.Harry goes to fetch Sirius's knife and the Invisibility cloak.", u"Harry sees the red lightflash of a Stunning Spell, and then she is overpowered and taken away.Ronan says Harry and Hermione should not be harmed because they are foals, but other Centaurs don't agree.At that moment Grawp appears and seems to be looking for Hagrid.", u'They pass the fountain in the Atrium and the desk where normally the watchwizard is, and enter the elevator to level nine, the Department of Mysteries.Like in his dream they go through the door on the end of the corridor into a large circular completely black room.The try one of the doors and enter a long rectangular room with an enormous tank of green liquid with pearly-white objects in it.', u"Malfoy is ordering Harry to give the Prophecy to him.Malfoy tells her to back off and Harry figures out they want the glass sphere unharmed.Harry responds he'll smash the Prophecy first and then asks why Voldemort wants it.", u'Harry goes after her through the room with the brains.Harry avoids them by sending them back up in the air with a \xa4 Wingardium Leviosa.The door closes when Harry is in the circular room and the walls spin.', u"Chapter 5-37 The Lost Prophecy Harry is back in Dumbledore's office.Phineas Nigellus asks Harry why he's in Dumbledore's office.The other Headmasters wake up and Harry wants to leave but the office is locked.", u'He also tells that there has been a mass revolt of the Dementors of Azkaban.Harry and Hermione are visiting Ron in the Hospital wing.He wants to take housepoints but Gryffindor has none.'], "Harry Potter and the Sorcerer's Stone": [u"They start talking about what happened that day and saying that even the Muggles must have noticed something is going on.Dubledore states that the night before, Voldemort turned up in Godric's Hollow to find Lily and James Potter, which are rumoured to be dead.Harry has a lightning bolt scar on his forehead.", u"Chapter 1-2 The Vanishing Glass Ten years have passed and Harry is almost eleven.On family outings, Harry would normally be made to stay with a neighbor, Mrs. Figg.Harry talks to a boa constrictor (snake) and sets it free, making the glass from it's cage vanish.", u"It is decided that next year Dudley will go to Uncle Vernon's old school, Smeltings.A letter arrives for Harry in the post, but Uncle Vernon does not let him have it.After the letters start coming through the chimney, Uncle Vernon decides they will leave the house.", u"Chapter 1-4 The Keeper of the Keys Hagrid, a giant man arrives.He finds out Harry knows nothing at all about his past and his parents' world, nor that his parents and he are magical and he is famous.Harry is amazed to learn that he is a wizard.", u"Chapter 1-5 Diagon Alley In the morning, when Harry wakes up, an owl arrives bringing a newspaper.Harry pays it five Knuts from Hagrid's pocket.To buy Harry's school supplies, they go to the Wizard's bank Gringotts, where Harry's parents left him their gold.", u"The Dursleys leave, but Harry can't find the platform.She explains to Harry that he should 'walk right through the wall'.After going through the wall he arrives on the platform where the Hogwarts Express is already waiting.", u"In the Great Hall they will first undergo the Sorting Ceremony using the Sorting Hat, an old wizard's hat.Hermione tells those around her that the ceiling was bewitched to look like the sky outside.Dumbledore tells the students that he was asked by Mr. Filch, the caretaker, to remind them that no magic may be used between classes in the corridor.", u"Chapter 1-8 The Potions Master Harry is trying to get familiar with the school.He finds out that Argus Filch knows all that happens here and is very eager to catch students doing things they're not supposed to.Harry's Charms teacher is a tiny little wizard called Professor Flitwick.", u'Chapter 1-9 The Midnight Duel During breakfast Neville receives a Remembrall from his grandmother.In the afternoon, Harry has his first flying, which is taught by Madam Hooch.Draco flies away with the remembrall which Neville lost during his fall and Harry chases him.', u'Chapter 1-10 Halloween During breakfast, Harry gets his Nimbus Two Thousand by owl-post.Draco, seizing the package, is startled to find out from Professor Flitwick that Harry is allowed a broom, while no first year is allowed to have one at school.At night Harry has his first Quidditch training.', u"Chapter 1-11 Quidditch Harry is scheduled to play in his his first Quidditch match between Gryffindor and Slytherin.Harry has his first live match experience with it's Bludgers, Quaffle and the Snitch.During the game Harry's Nimbus Two Thousand is going crazy, almost throwing Harry off.", u'They do not find him in any of the common books.Students are not allowed to look in the Restricted Section of the library without special permission in the form of a signed note from one of the teachers.When dinner was finished, Harry is laden down with things he had gotten out of the crackers, including a pack of non-explodable luminous balloons, a Grow-Your-Own-Warts kit, and his own new wizard chess set.', u'Chapter 1-13 Nicolas Flamel Harry has nightmares about his parents disappearing in a flash of green light, while a high voice cackles with laughter.Harry finds out that Snape will be referee for his next Quidditch match.At that moment Neville topples into the common room, his legs stuck together by a Leg-Locker Curse, put on him by Draco Malfoy.', u"It is against the law to keep a Dragon, as dragon breeding was outlawed by the Warlock's Convention of 1709.Hagrid shows them a dragon egg he won the night before from a stranger.They send Charlie a letter by owl and he writes them back telling them he would be glad to take the dragon and that he will ask some friends to pick it up at midnight on saturday from the tallest tower of Hogwarts.", u"About a week before exams, Harry overhears Quirrell and Snape talking, and they suspect that Snape now knows how to get by all the obstacles that are protecting the Sorcerer's Stone.Harry, Neville, Hermione and also Malfoy who got detention earlier have to go with Hagrid and Fang into the forbidden forest.A unicorn has been hurt badly, the second time in one week since Hagrid found one dead last wednesday.", u"Chapter 1-16 Through the Trapdoor The final exams of the first year begin.Hermione complains she needn't have learned about the 1637 Werewolf Code of Conduct or the uprising of Elfric the Eager.Harry is worried about his hurting scar and restless, feeling he forgot something.", u"Chapter 1-17 The Man with Two Faces Quirrell, not Snape, turns out to be in the room.He has been the one going after the Sorcerer's Stone the whole time.By magic, out of nowhere ropes spring out of thin air and wrapping Harry tightly."]}
hp7 = {'Harry Potter and the Deathly Hallows': [u'As our story opens Severus Snape and fellow Death Eater Yaxley are on their way to a meeting at Lucuis Malfoy\u2019s palatial mansion. When they get there they are seated at a long table with their fellow Death Eaters. Voldemort sits at the head, and anxiously awaits Snape\u2019s report on when Harry Potter is to be moved from his safehouse. He is planning to attack Harry on his way to a secret location, where he will be constantly guarded by members of the Order of the Phoenix.', u'As Harry cleans out his school trunk completely for the first time since he started at Hogwarts, the process is like going back in time. He comes across items left abandoned in there from each year, and going through them all is like taking a walk down memory lane. He\u2019s sorting items by the things he\u2019ll need on his journey. Everything else, he\u2019s sure, the Dursleys will burn in the middle of the night after he\u2019s gone.', u"For the past few weeks, the Dursleys have been preparing to go into hiding. His uncle has been changing his mind every day, alternating between going and refusing to go. Now, he has convinced himself that Harry is just after the house, and will do some 'hocus-pocus' to get the deeds in his name the moment they leave. Harry manages to convince him of the danger that they're in, and that Voldemort's supporters will torture them for information on Harry if they're caught.", u"As Harry is left alone in the Dursleys' house he\u2019s filled with something almost like sadness. He knows he will probably never set foot in here again, and as he waits for his guard he remembers all the times growing up in this house. He revisits his cupboard under the stairs and remembers what it was like waking up there every morning.", u"Harry can\u2019t think straight. All he knows is that Hagrid is lying on the ground and won\u2019t get up, and he has no idea where they are. He finds out he is at Tonks\u2019s parents' house, and a few minutes later he finds out that Hagrid is all right. Harry tells Ted Tonks that somehow the Death Eaters knew he was being moved tonight, because they were waiting for all of them. Ted tells Harry that their house is completely protected, so at least the Death Eaters will not be able to attack them there. Harry is terrified for the rest of his friends and hopes that they made it through the attack.", u'As Harry, Ron, and Hermione start planning for their journey to find Voldemort\u2019s Horcruxes, they have to be very tight-lipped about what they are doing. Mrs. Weasley knows they are planning something, and she does her best to keep them separated so they have no time to discuss what they are about to do. The entire household is planning for Bill and Fleur\u2019s upcoming wedding, so they are kept really busy cleaning and decluttering the Burrow.', u'On Harry\u2019s seventeenth birthday he\u2019s touched and amused to be given a book from Ron, of all people, on how to charm witches, and a watch by Mr. and Mrs. Weasley.', u'Bill and Fleur\u2019s wedding turns out to be a glorious affair. Harry, disguised as a Weasley cousin named Barny, gets to meet all of Ron\u2019s family and he gets to see many people he hasn\u2019t seen in a while.', u'Pandemonium breaks loose. Harry and Hermione sprint through the crowd, looking frantically for Ron. Masked figures are starting to appear out of nowhere, and then suddenly they find Ron. Without a word, Hermione grabs them and Apparates them both out of there.', u'Hermione has fortunately packed them sleeping bags and when Harry wakes up the next morning he sees that Ron and Hermione fell asleep holding hands. The sight of them makes him feel a little bit lonely.', u'While they wait for Kreacher\u2019s return, Death Eaters have started taking up watch outside Grimmauld Place. Lupin shows up to give them news of what happened after the wedding, and they\u2019re all really glad to see someone from the Order. Lupin doesn\u2019t bring much good news, however. The Death Eaters now have the full might of the Ministry behind them now that the Minister is dead, and rumors are being spread that Harry is wanted for questioning in Dumbledore\u2019s death.', u'As August passes slowly on, more and more Death Eaters are hanging out in the square outside Grimmauld Place. The change in Kreacher is nothing short of amazing. He now cooks every meal, Grimmauld Place is shining clean, and he treats Harry, Ron, and Hermione with utmost respect. Grimmauld Place has become like a cozy home to the three of them.', u'They have a much harder time than they thought they would posing as Ministry workers. They\u2019re asked questions they don\u2019t know the answers to, asked to do things they don\u2019t know how to do, and now that they\u2019ve been forced to split up, have no idea how the others are doing in their quest to find Umbridge\u2019s office.', u"When Harry comes to he\u2019s surprised to find them in a forest, and Ron is soaked with blood; he's been splinched so a big chunk of his shoulder was missing, and Hermione healed the wound with some dittany. Hermione explains that one of the Death Eaters, Yaxley, grabbed hold of her just as she was Apparating them back to Grimmauld Place. He was taken along and she unwittingly let him into Grimmauld Place, which means they couldn\u2019t go there. In a split second she Apparated them out of the house and into the place where they had camped during the Quidditch World Cup(Harry's fourth year in Hogwarts).", u'Tempers are flaring high the next day, and Harry can\u2019t manage to produce a Patronus, which has him highly unnerved until Hermione figures out what\u2019s wrong. The locket, which they\u2019ve started taking in turns wearing to keep safe, is making them all feel horrible. When Hermione makes Harry take off the Horcrux he feels elated, as though he can produce a thousand Patronuses.', u'The next morning Harry can\u2019t believe that Ron has really left them for good. Hermione is devastated and she cries for weeks after begging Ron not to leave. Harry and Hermione pack up and leave their campsite with heavy hearts. Ron does not show up.', u'When Harry finds his old home, which is still standing, he\u2019s surprised that the ruins are even still there. There is a plaque on the site telling about the death of Lily and James, and how he, Harry, survived the Killing Curse of Lord Voldemort.', u'Harry is devastated by the loss of his wand, and has no idea how he\u2019s supposed to defeat Voldemort now that his special wand is destroyed.', u'They\u2019re in the thick of winter, and snow is falling hard and fast in the forests where Harry and Hermione are hiding. As Harry is on watch one night outside the tent, he sees a silver light in the forest. He looks closer and sees a silver white doe. It is beautiful, and strangely familiar to Harry, although he can\u2019t say why. The Patronus begins to pick her way back into the forest, and Harry starts to follow her. She leads him to a small frozen pond and disappears. When Harry looks into the pond, he sees Gryffindor\u2019s sword deep in the water.', u'Hermione does not forgive Ron overnight for leaving them, but Harry is thrilled to have him back. He\u2019s also excited that they managed to destroy another Horcrux, and he\u2019s feeling much better about their progress.', u'The Deathly Hallows is a children\u2019s tale, but Harry has never heard it. Hermione takes out the book that Dumbledore left her in his will and reads the entire tale to them. The story is about three brothers who meet Death on their road late one night. They are each awarded a prize from Death since they escaped him earlier by not drowning in a dangerous river. The first brother asks for a wand that will always win duels and allow the owner to escape death. Without question, Death gives it to him. The second brother asks for something that will be able to recall others from death. Death picks up a stone and tells the second brother that it now has the power to bring back the dead. The third brother asks for something that will enable him to hide from death. Death gives the third brother his Invisibility Cloak.', u"They\u2019re extremely worried that Luna has been taken by the Ministry, but don\u2019t know what they can do to help her. Hermione insists that their visit to the Lovegoods' was a waste of time. She doesn\u2019t believe the story of the three brothers at all, but Harry is drawn to the fairy tale. The idea that he could conquer death and not be killed by Voldemort pulls on his imagination and gives him hope. He also figures out, however, that this is what Voldemort is searching for. Voldemort wants the Elder Wand with which to fight Harry..", u'Hermione quickly does a spell on Harry to make his face swell up so it looks like he\u2019s been stung by bees. The Snatchers don\u2019t recognize him at first, but they quickly realize that he is Harry Potter. They decide to take him to Voldemort personally, and they bring them all to Malfoy Mansion.', u'Harry is devastated by Dobby\u2019s death, and when he buries him he does so by hand, without using magic. When they all come out to lay Dobby to rest, they thank him for saving their lives.', u'Griphook has finally agreed to help them break into Gringotts. The only hitch is that he wants Gryffindor\u2019s sword in return. Harry agrees, but inwardly squirms at the thought of his white lie. He will give the sword to Griphook, but he doesn\u2019t tell him when.', u"Their plan is simple: Go with Griphook with Hermione disguised as Bellatrix Lestrange in order to access her vault. As Harry stole Bellatrix's wand during their tussle at Malfoy Mansion, they have her wand and even got some of her hair for use in Polyjuice Potion.", u'When the dragon finally gets them down low enough they jump into a lake, somewhere far away from London. Once they\u2019ve treated their many injuries, they discuss the fact that they lost the sword they so desperately needed to destroy the Horcrux.', u"As soon as they Apparate into Hogsmeade Village, a scream rends the air, alerting the Death Eaters to their presence. They\u2019re taken in by the barkeep of the Hog's Head, who hides them from the Death Eaters and makes up an excuse for the alarm going off. Once he\u2019s thrown them off the trail, he closes the door and looks Harry, Ron, and Hermione up and down. Harry suddenly recognizes him as Dumbledore\u2019s brother. He finds out that Aberforth is the one who sent Dobby to rescue them when Harry shouted into the mirror.", u'Neville is overjoyed to see them but Harry is horrified at Neville, who looks like he recently got beat almost to death. Neville leads them through the portrait down a long, dark hallway. It\u2019s the last secret passageway into Hogwarts. As they walk, Neville fills them in on what\u2019s been happening at Hogwarts. It\u2019s been horrible, and the three can\u2019t believe at how different things are at the school.', u'They stun the Carrows and begin to tell Professor McGonagall what they\u2019re up to. They tell her that they must find the lost diadem before Voldemort gets into the castle. McGonagall tells Harry that she and the others will secure the castle against Voldemort as long as they can so that Harry can search for the diadem.', u'In the Great Hall, teachers and prefects are sneaking the younger students out of the school before the battle begins.', u'Harry, Ron, and Hermione have to drag Fred\u2019s body out the way, and Harry can\u2019t permit himself to grieve. The castle is under serious attack, and the last Horcrux to be destroyed is Voldemort\u2019s snake, Nagini.', u'Before Harry can even wonder what Snape just gave him, he hears Voldemort\u2019s voice magically magnified. He calls for his forces to retreat, and tells Harry that he has one hour to surrender. If he doesn\u2019t, Lord Voldemort will enter the battle himself, and kill every single person in Hogwarts.', u"Harry's heart seems to beat harder and with more vigor now that he knows he must die. Now that he knows, he feels more alive than ever, and wonders if it will hurt. As he sits in the office coming to grips with the fact that he must die soon, he knows that he won\u2019t duck out. Too many people have died for him already.", u"When Harry opens his eyes he is alone in a bright mist. The more he looks around the more it looks like he\u2019s in some domed room. He thinks that he is in King's Cross. He sees an ugly, small crying child and before he can do anything about it, Dumbledore appears.", u"When Harry opens his eyes again he\u2019s back in the forest, face-down on the ground. He hears Voldemort, who is on the ground as well, telling someone to make sure he\u2019s dead. Soft hands touch his face, and a whisper asks if Draco is alive. He whispers that he is, and Narcissa yells back to the crowd that Harry is, indeed, dead. Voldemort makes Hagrid carry him back up to the castle to show everyone Harry's body."]}
def main():
	#retrieve_all_summaries()
	retrieve_hp7_summaries()

	


def retrieve_hp7_summaries():
	print json.dumps(hp7)
	return
	main = dict()
	page = retrieve_page(HP7_URL)
	html = BeautifulSoup(page)
	posts = html.find_all("span", {"class":"mw-headline"})
	book = books[len(books)-1]
	summary = []
	for i in range(2,len(posts)-2):
		try:
					title = posts[i]
					description = title.find_next('p')
					print title.text.encode('utf-8')
					description = description.string
					summary.append(description)
		except UnicodeEncodeError:
					print "ERROR"

	main[book] = summary
	print main

	
	

def retrieve_all_summaries():
	main = dict()
	for book in books:
		main[book] = []
	for i in range(1,len(books)):
		book_name = books[i-1]
		num_of_chaps = num_chaps[i-1]
		for j in range(1,num_of_chaps+1):
			summary_list = main[book_name]
			s = " "
			try:
				s = retrieve_summary(i,j)
			except UnicodeEncodeError:
				s = "ERROR"
			summary_list.append(s)
			print i,j
	print main

def retrieve_summary(book, chapter):
	url = create_request(book,chapter)
	page = retrieve_page(url)
	info = json.loads(page)
	lines = info['summary']
	summary = ""
	for line in lines:
		summary = summary + line
	summary =  " ".join(summary.split())
	#print summary
	return summary

def create_request(book,chapter):
	return SUMMARY_API + source_url(book,chapter)

def retrieve_page(url):
	serialized_data = urllib2.urlopen(url).read()
	return serialized_data

def summary_api(url):
	url = SMMZR_API + url

def source_url(book,chapter):
	return SOURCE_URL + str(book) + "-" + str(chapter) + ".htm"

if __name__ == "__main__":
    main()
